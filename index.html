<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Grow a Garden with Trastratravich: @Xn1ckname EDITION 1.6</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; font-family: 'Arial Black', sans-serif; user-select: none; }
        #game-screen { width: 100vw; height: 100vh; background-color: #82c91e; position: relative; transition: opacity 2s; }
        .ui-header { position: absolute; top: 20px; left: 20px; right: 20px; display: flex; justify-content: space-between; align-items: flex-start; pointer-events: none; }
        .title-box { background: white; padding: 15px 25px; border-radius: 15px; border: 4px solid #ccc; font-weight: bold; font-size: 22px; pointer-events: auto; box-shadow: 0 6px 0 #bbb; }
        #garden-hint-text { color: #555; font-size: 14px; font-family: Arial, sans-serif; margin-top: 5px; display: none; }
        .stats-column { display: flex; flex-direction: column; align-items: flex-end; gap: 10px; pointer-events: auto; }
        .white-plate { background: white; padding: 12px 30px; border-radius: 20px; border: 4px solid #ccc; display: flex; align-items: center; gap: 12px; font-weight: bold; font-size: 30px; box-shadow: 0 6px 0 #bbb; }
        .lvl-plate { background: #a333c8; color: white; border: 3px solid #7a2099; padding: 8px 15px; font-size: 18px; border-radius: 10px; }
        .xp-container { width: 280px; height: 40px; background: #cccccc; border: 4px solid #444; border-radius: 12px; position: relative; overflow: hidden; }
        #xp-fill { height: 100%; width: 0%; background: #33e0ff; position: absolute; z-index: 1; transition: width 0.5s; }
        #xp-text { position: absolute; width: 100%; text-align: center; line-height: 40px; font-weight: bold; font-size: 18px; z-index: 10; color: black; }
        .coin-icon { width: 35px; height: 35px; background: #fcc419; border: 3px solid #f08c00; border-radius: 50%; position: relative; }
        .coin-icon::after { content: '‚óÜ'; color: white; font-size: 20px; position: absolute; top: 1px; left: 8px; }
        .side-menu { position: absolute; right: 30px; top: 55%; transform: translateY(-50%); display: flex; flex-direction: column; gap: 25px; z-index: 100; }
        .circle-btn { width: 110px; height: 110px; border: none; cursor: pointer; display: flex; justify-content: center; align-items: center; border-radius: 25px; box-shadow: 0 10px 0 rgba(0,0,0,0.3); transition: transform 0.1s; position: relative; }
        .circle-btn:active { transform: translateY(5px); box-shadow: 0 5px 0 rgba(0,0,0,0.3); }
        .btn-p { background: #b197fc; }
        .btn-b { background: #1a0dab; }
        .btn-r { background: #ff4d4d; }
        
        .msg-icon { width: 50px; height: 40px; background: white; border-radius: 8px; position: relative; }
        .msg-icon::after { content: ''; position: absolute; bottom: -12px; left: 10px; border-left: 12px solid white; border-bottom: 12px solid transparent; }
        .msg-lines { display: flex; flex-direction: column; gap: 4px; padding: 8px; }
        .msg-line { height: 4px; background: #ff4d4d; border-radius: 2px; width: 100%; }
        .msg-line.short { width: 60%; }

        .notif-badge { position: absolute; top: -5px; left: -5px; background: red; color: white; border: 3px solid white; border-radius: 50%; width: 35px; height: 35px; font-size: 18px; display: none; justify-content: center; align-items: center; z-index: 10; }
        .dots-circ { width: 80px; height: 80px; border: 6px solid white; border-radius: 50%; display: flex; justify-content: center; align-items: center; gap: 8px; }
        .dot { width: 14px; height: 14px; background: white; border-radius: 50%; }
        .modal { display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; z-index: 500; width: 480px; border-radius: 30px; border: 6px solid #ccc; box-shadow: 0 0 100px rgba(0,0,0,0.5); }
        .close-x { position: absolute; top: -20px; right: -20px; width: 65px; height: 65px; background: #fcc419; border: 5px solid white; border-radius: 50%; color: white; cursor: pointer; font-weight: bold; display: flex; justify-content: center; align-items: center; font-size: 40px; box-shadow: 0 6px 0 #bbb; }
        #admin-cube { display: none; position: absolute; top: 20px; right: 20px; width: 100px; height: 100px; background: black; color: white; font-size: 14px; text-align: center; border: 4px solid white; cursor: move; z-index: 2000; align-items: center; justify-content: center; padding: 5px; box-sizing: border-box; }
        .admin-modal { background: black !important; color: white !important; border: 6px solid #444 !important; }
        .admin-btn { background: #222; color: #00ff00; border: 3px solid white; padding: 15px; width: 100%; margin: 10px 0; cursor: pointer; font-family: monospace; text-align: left; font-size: 16px; }
        .admin-input { width: 93%; background: #111; border: 2px solid #00ff00; color: #00ff00; padding: 10px; font-family: monospace; margin-top: 10px; font-size: 16px; }
        .confirm-btn { background: #00ff00; color: black; border: none; padding: 10px; width: 100%; font-weight: bold; cursor: pointer; margin-top: 5px; border-radius: 5px; }
        #global-announcement { display: none; position: absolute; bottom: 200px; left: 50%; transform: translateX(-50%) translateY(100px); width: 85%; min-height: 120px; background: white; border: 8px solid #000; border-radius: 30px; padding: 30px; z-index: 3000; transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        #global-announcement.show { display: block; transform: translateX(-50%) translateY(0); }
        .owner-tag { position: absolute; top: -25px; left: 30px; background: #000; color: #fff; padding: 8px 25px; border-radius: 15px; font-size: 18px; }
        .popup { position: absolute; font-weight: bold; animation: floatUp 1s forwards; z-index: 5000; font-size: 45px; pointer-events: none; text-shadow: 3px 3px 0 white; }
        @keyframes floatUp { 0% { opacity: 0; transform: translateY(0); } 30% { opacity: 1; } 100% { opacity: 0; transform: translateY(-150px); } }
        .garden-plot, .antenna-plot { position: absolute; width: 140px; height: 140px; border: 6px solid white; transform: translate(-50%, -50%); cursor: pointer; background: rgba(255,255,255,0.3); display: flex; justify-content: center; align-items: center; border-radius: 20px; }
        .garden-plot span, .antenna-plot span { font-size: 90px !important; }
        #placement-hint { display: none; position: absolute; bottom: 250px; left: 50%; transform: translateX(-50%); background: white; padding: 20px 40px; border-radius: 20px; border: 6px solid #000; font-weight: bold; font-size: 24px; z-index: 1000; text-align: center; box-shadow: 0 10px 0 #ddd; color: black; max-width: 80%; }
        #ending { display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: black; z-index: 10000; color: white; flex-direction: column; justify-content: center; align-items: center; text-align: center; font-size: 35px; padding: 40px; line-height: 1.6; transition: opacity 3s; opacity: 0; box-sizing: border-box; }
        button { font-size: 18px !important; }
        #anti-cheat-screen { display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: black; z-index: 20000; justify-content: center; align-items: center; color: red; font-size: 50px; font-weight: bold; text-align: center; flex-direction: column; }
        
        #robbery-alert { display: none; position: absolute; top: -400px; left: 50%; transform: translateX(-50%); width: 500px; background: white; border: 8px solid #ff4d4d; border-radius: 25px; padding: 20px; z-index: 4000; transition: top 0.8s cubic-bezier(0.6, -0.28, 0.735, 0.045); box-shadow: 0 20px 0 rgba(0,0,0,0.2); }
        .robbery-btn { background: #82c91e; color: black; border: 4px solid #69a018; padding: 15px; width: 100%; border-radius: 15px; font-weight: bold; font-size: 22px; cursor: pointer; margin-top: 15px; box-shadow: 0 5px 0 #69a018; }
        .robbery-btn:active { transform: translateY(3px); box-shadow: 0 2px 0 #69a018; }
        .review-item { border-bottom: 2px solid #eee; padding: 10px 0; }
        .lan-btn { background: #82c91e; color: black; border: none; padding: 15px 40px; font-weight: bold; border-radius: 15px; cursor: pointer; display: block; margin: 20px auto 0; font-size: 20px; }
        
        #robbery-timer { font-size: 30px; color: #ff4d4d; font-weight: bold; display: block; margin-top: 10px; }
        .rep-dead-modal { text-align: center; border: 6px solid #ccc !important; }
        .rep-btn-ok { background: #82c91e; color: white; border: none; padding: 15px 50px; border-radius: 10px; font-weight: bold; cursor: pointer; margin-top: 20px; font-size: 20px; }

        /* --- MOD MENU STYLES --- */
        #mod-menu-btn { 
            position: absolute; top: 20px; right: 20px; width: 115px; height: 115px; 
            background: #a333c8; border: 5px solid #fff; border-radius: 50%; 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            cursor: pointer; z-index: 5000; font-size: 13px; font-weight: bold; box-shadow: 0 0 20px rgba(163, 51, 200, 0.6);
            pointer-events: auto; color: white;
        }
        #mod-menu-panel {
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 460px; height: 750px; background: #000; border: 5px solid #333; 
            border-radius: 20px; z-index: 6000; padding: 20px; color: white; overflow-y: auto;
            pointer-events: auto;
        }
        .mod-title { 
            color: #ff0000; text-align: center; font-size: 18px; margin-bottom: 20px; 
            text-shadow: 0 0 15px #ff0000; 
            animation: modFlash 0.8s infinite alternate; 
        }
        @keyframes modFlash {
            from { opacity: 1; text-shadow: 0 0 5px #ff0000; }
            to { opacity: 0.6; text-shadow: 0 0 25px #ff0000, 0 0 40px #ff0000; }
        }
        .mod-option { 
            background: #1a1a1a; border: 2px solid #333; padding: 15px; margin-bottom: 10px; 
            border-radius: 10px; cursor: pointer; transition: 0.2s;
        }
        .mod-option:hover { background: #333; }
        .mod-hint { font-size: 12px; color: #888; margin-top: 5px; }
        .visual-ann-box {
            position: fixed; bottom: 0; left: 50%; transform: translateX(-50%) translateY(100%);
            width: 85%; background: white; border: 5px solid black; border-radius: 20px 20px 0 0;
            padding: 25px; z-index: 7000; transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            pointer-events: none; text-align: center;
        }
        .visual-ann-box.active { transform: translateX(-50%) translateY(-150px); }

        #private-tag {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            color: red; font-size: 24px; font-weight: bold; text-shadow: 0 0 10px red;
            pointer-events: none; z-index: 9999;
        }
        .rainbow-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            pointer-events: none; z-index: 8000; opacity: 0.5;
            background: linear-gradient(45deg, red, orange, yellow, green, blue, indigo, violet);
            background-size: 400% 400%; animation: rainbowAnim 5s linear infinite;
            display: none;
        }
        @keyframes rainbowAnim { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
        .orange-flash { position: fixed; top:0; left:0; width:100vw; height:100vh; background:orange; z-index:20000; display:none; justify-content:center; align-items:center; }
        .shake { animation: shakeAnim 0.1s infinite; }
        @keyframes shakeAnim { 0% { transform: translate(1px, 1px); } 50% { transform: translate(-2px, -2px); } 100% { transform: translate(1px, 1px); } }
    </style>
</head>
<body>

<div id="anti-cheat-screen">
    <div>–ú–æ–ª–æ–¥–µ—Ü, –æ—Ç–ø—Ä–∞–≤–ª—è–π—Å—è –Ω–∞ —Ç–æ—Ç —Å–≤–µ—Ç.</div>
</div>

<div id="private-tag">Private Server ‚Äî @Xn1ckname</div>
<div id="rainbow-scr" class="rainbow-overlay"></div>
<div id="orange-scr" class="orange-flash"><div id="orange-txt" style="color:white; font-size:60px; font-weight:bold;">ITS ME, NICKNAME!</div></div>

<div id="mod-menu-btn" onmousedown="modStartDrag(event)" ontouchstart="modStartDrag(event)">
    <span style="font-size: 55px; pointer-events: none;">üë®üèø‚Äçüç≥</span>
    <span style="pointer-events: none; margin-top: -5px;">Admin Panel</span>
</div>

<div id="mod-menu-panel" onmousedown="event.stopPropagation()" ontouchstart="event.stopPropagation()">
    <div class="close-x" style="position: absolute; top: 10px; right: 10px; width: 55px; height: 55px; font-size: 35px; background: #fcc419; color: white; display: flex; justify-content: center; align-items: center; border-radius: 50%; border: 4px solid white; cursor: pointer; z-index: 100;" onclick="document.getElementById('mod-menu-panel').style.display='none'">√ó</div>
    
    <div class="mod-title">Grow A Garden With Trastratravich 1.5 üç≠ <br> Made By: @Xn1ckname</div>
    
    <div class="mod-option" onclick="modMoney()">1) Infinity Money</div>
    <div class="mod-option" onclick="modLevel()">2) Max Level</div>
    <div class="mod-option" onclick="modGodMode()">
        3) God Mode
        <div class="mod-hint">–ß—Ç–æ –¥–µ–ª–∞–µ—Ç: –£–±–∏—Ä–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–ª–æ—Ö–∏–µ –æ—Ç–∑—ã–≤—ã, –∏ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç –≤—Ö–æ–¥ –¥–ª—è –≤–æ—Ä–æ–≤.</div>
    </div>
    <div class="mod-option" onclick="modAllItems()">4) Get All Items</div>
    <div class="mod-option" onclick="modPlace5()">5) Place 5 Gardens</div>
    
    <div style="background: #1a1a1a; padding: 15px; border-radius: 10px; margin-bottom: 10px;">
        <div style="color: #666; font-size: 14px; margin-bottom: 5px;">6) Announcement (Visual)</div>
        <input type="text" id="mod-ann-input" class="admin-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –ê–Ω–æ–Ω—Å..." style="width: 90%; background: #222; margin-bottom: 10px;">
        <button class="confirm-btn" style="background: #00ff00; color: black;" onclick="modSendAnn()">–ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
    </div>

    <div class="mod-option" onclick="modClearInv()">7) Clear Inventory</div>
    <div class="mod-option" onclick="modResetGame()">8) Reset Game</div>
    <div class="mod-option" onclick="modSchenoriy()">9) Schenoriy Cdel (Complete The Game)</div>
    <div class="mod-option" onclick="location.reload()">10) Reset Server</div>
    <div class="mod-option" onclick="modAdminFruits()">11) Admin Fruits</div>
</div>

<div id="visual-ann-box" class="visual-ann-box">
    <div style="color: black; font-weight: bold; font-size: 16px; margin-bottom: 5px;">Player [Hacker]</div>
    <div id="visual-ann-text" style="color: black; font-size: 22px; font-weight: bold;"></div>
</div>

<div id="game-screen">
    <div class="ui-header">
        <div class="title-box">
            Grow a Garden with<br>Trastratravich
            <div id="garden-hint-text">–°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ—Ç–∑—ã–≤–∞–º–∏, —á—Ç–æ–±—ã –∑–Ω–∞—Ç—å –º–Ω–µ–Ω–∏–µ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π –ø—Ä–æ –≤–∞—à –æ–≥–æ—Ä–æ–¥!</div>
        </div>
        <div class="stats-column">
            <div class="white-plate"><div class="coin-icon"></div>–ú–æ–Ω–µ—Ç—ã: <span id="m-val">900</span></div>
            <div class="lvl-plate">–¢–µ–∫—É—â–∏–π –£—Ä–æ–≤–µ–Ω—å: <span id="l-val">1</span></div>
            <div class="xp-container">
                <div id="xp-text">0 / 100 XP</div>
                <div id="xp-fill"></div>
            </div>
        </div>
    </div>

    <div id="robbery-alert">
        <div style="background:#ff4d4d; color:white; padding:15px; margin:-20px -20px 15px -20px; border-radius:20px 20px 0 0; text-align:center; font-size:24px; font-weight:bold;">üö® –ö–†–ê–ñ–ê! üö®</div>
        <p style="text-align:center; font-weight:bold; font-size:18px;" id="robbery-msg">–ü–ê–†–ù–ò –ö–†–ê–î–£–¢ –í–ê–®–ò –§–†–£–ö–¢–´, –û–°–¢–ê–ù–û–í–ò–¢–ï –ò–•!</p>
        <div id="robbery-timer" style="text-align:center;">35</div>
        <button class="robbery-btn" onclick="stopRobbery()">–í—ã–∑–≤–∞—Ç—å –ø–æ–¥–≥–æ–Ω</button>
    </div>

    <div id="admin-cube">–ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å 1.6 üåø @Xn1ckname</div>

    <div id="global-announcement">
        <div class="owner-tag">@Xn1ckname [Owner]</div>
        <p id="announcement-text" style="color: black; margin: 15px 0 0 0; font-size: 26px; font-weight: bold; text-align: center;"></p>
    </div>

    <div id="placement-hint"></div>

    <div class="side-menu">
        <button class="circle-btn btn-r" onclick="handleReviewsClick()">
            <div id="review-badge" class="notif-badge">0</div>
            <div class="msg-icon">
                <div class="msg-lines">
                    <div class="msg-line"></div>
                    <div class="msg-line"></div>
                    <div class="msg-line short"></div>
                </div>
            </div>
        </button>
        <button class="circle-btn btn-p" id="menu-trigger-btn" onclick="openW('main-m')"><span style="font-size:70px; color:white;">‚ò∞</span></button>
        <button class="circle-btn btn-b" id="trigger-btn">
            <div class="dots-circ"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
        </button>
    </div>

    <div class="modal" id="review-no-garden">
        <div style="background:#1a0dab; color:white; padding:15px; margin:-30px -30px 20px -30px; border-radius:30px 30px 0 0; text-align:center;">–û—Ç–∑—ã–≤—ã –≤ –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —Å–∞–¥–∞.</div>
        <p style="text-align:center; font-weight:bold; font-size:20px;">–•–º–º, –º–æ–∂–µ—Ç —Ç–µ–±–µ —Å—Ç–æ–∏—Ç —Å–Ω–∞—á–∞–ª–∞ –æ—Ç–∫—Ä—ã—Ç—å —Å–≤–æ–π —Å–∞–¥? –í–æ–∑–≤—Ä–∞—â–∞–π—Å—è –ø–æ-–ø–æ–∑–∂–µ</p>
        <button class="lan-btn" onclick="cls()">–õ–∞–Ω.</button>
    </div>

    <div class="modal" id="review-empty-garden">
        <div style="background:#1a0dab; color:white; padding:15px; margin:-30px -30px 20px -30px; border-radius:30px 30px 0 0; text-align:center;">–û—Ç–∑—ã–≤—ã –≤ –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —Å–∞–¥–∞.</div>
        <p style="text-align:center; font-weight:bold; font-size:20px;">–£ –≤–∞—Å –Ω–µ—Ç—É –Ω–∏–∫–∞–∫–∏—Ö –æ—Ç–∑—ã–≤–æ–≤ –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç, —Ä–∞–∑–≤–∏–≤–∞–π—Ç–µ –≤–∞—à —Å–∞–¥</p>
        <button class="lan-btn" onclick="cls()">–õ–∞–Ω.</button>
    </div>

    <div class="modal" id="review-list-modal">
        <div class="close-x" onclick="cls()">√ó</div>
        <div style="background:#1a0dab; color:white; padding:15px; margin:-30px -30px 20px -30px; border-radius:30px 30px 0 0; text-align:center;">–û—Ç–∑—ã–≤—ã –≤ –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —Å–∞–¥–∞.</div>
        <div id="reviews-container" style="max-height:400px; overflow-y:auto; padding-right:10px;"></div>
    </div>

    <div class="modal" id="rep-dead-m" class="rep-dead-modal">
        <div style="background:#ff4d4d; color:white; padding:15px; margin:-30px -30px 20px -30px; border-radius:30px 30px 0 0; text-align:center; font-size:24px; font-weight:bold;">–†–µ–ø—É—Ç–∞—Ü–∏—è –ú–µ—Ä—Ç–≤–∞</div>
        <p style="color:black; font-size:18px; text-align:center; font-weight:bold; margin-top:20px;">–í—Å–µ –≤–∞—à–∏ —Å–∞–¥—ã, –±—ã–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã, –∏ –∑–∞–∫—Ä—ã—Ç—ã –Ω–∞–≤—Å–µ–≥–¥–∞, –ø–æ-–ø—Ä–∏—á–∏–Ω–µ ‚Äî —É–∂–∞—Å–Ω–æ–π –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –æ—Ç –∫–æ—Ç–æ—Ä–æ–π –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏ –±—ã–ª–∏ –≤ —É–∂–∞—Å–µ. –° —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞, –í—ã –æ–±—Ä–µ—á–µ–Ω—ã, –ú—ã –∑–∞–±—Ä–∞–ª–∏ –≤–∞—à–∏ –ø—Ä–∞–≤–∞ –Ω–∞ –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–∞–¥–æ–≤.</p>
        <button class="rep-btn-ok" onclick="cls()">–û–∫.</button>
    </div>

    <div class="modal" id="ann-error" style="background: white;">
        <div class="close-x" style="background: #fcc419;" onclick="clsOne('ann-error'); openW('admin-panel');">√ó</div>
        <p style="color: black; text-align: center; font-weight: bold; margin-top: 30px; font-size: 20px;">–ê–Ω–æ–Ω—Å –ø—É—Å—Ç–æ–π, –≤–≤–µ–¥–∏ —Ç–µ–∫—Å—Ç.</p>
    </div>

    <div class="modal" id="main-m">
        <div class="close-x" onclick="cls()">√ó</div>
        <h2 style="text-align:center; font-size: 30px; margin-bottom: 20px;">–í–∞—à–∞ –°–µ—Ç—å.</h2>
        <div style="display:flex; gap:15px; flex-wrap: wrap;">
            <div style="border:4px solid red; padding:15px; text-align:center; flex:1; border-radius: 15px; min-width: 140px;">
                <b style="color:black; font-size: 16px;">–ü—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ –°–∞–¥</b><br>
                <b style="font-size: 18px;">500 –º–æ–Ω–µ—Ç.</b><div style="font-size:60px;">üå¥</div>
                <button style="background:red; color:white; border:none; width:100%; padding:12px; font-weight:bold; cursor:pointer; font-size: 18px; border-radius: 8px; margin-top:5px;" onclick="startGo('garden')">–ì–æ.</button>
            </div>
            <div id="antenna-func" style="border:4px solid #33e0ff; padding:15px; text-align:center; flex:1; border-radius: 15px; opacity:0.5; min-width: 140px;">
                <b style="color:black; font-size: 16px;">XP –ê–Ω—Ç–µ–Ω–Ω–∞</b><br>
                <b style="font-size: 18px; visibility: hidden;">1600 –º–æ–Ω–µ—Ç.</b><div style="font-size:60px;">üì°</div>
                <button style="background:#33e0ff; color:black; border:none; width:100%; padding:12px; font-weight:bold; cursor:pointer; font-size: 18px; border-radius: 8px; margin-top:5px;" onclick="tryBuyAntenna()">–ì–æ.</button>
            </div>
            <div id="secret-deal" style="text-align:center; width:100%; opacity:0.5; margin-top: 15px;">
                <b id="deal-txt" style="color:red; font-size: 18px;">–ó–∞–∫—Ä—ã—Ç–æ</b><div style="font-size:60px;">?</div>
                <div style="background:#e066ff; color:white; font-size:14px; padding: 10px; border-radius: 5px;">–©–µ–Ω–æ—Ä–∏—á–Ω—ã–π –°–¥–µ–ª.</div>
                <p style="font-size:12px; font-weight:bold; margin-top:10px; color:#555;">–î–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –≤–∞–º —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç–∏—á—å 900 —É—Ä–æ–≤–µ–Ω—å.</p>
            </div>
        </div>
    </div>

    <div class="modal admin-modal" id="admin-panel">
        <div class="close-x" onclick="cls()">√ó</div>
        <h2 style="font-size: 24px; color: white; margin-bottom: 5px;">–ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å 1.6 üåø @Xn1ckname</h2>
        <button class="admin-btn" onclick="cheatMoney()">1) –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –¥–µ–Ω—å–≥–∏ ‚Äî –≤–∫–ª—é—á–∏—Ç—å.</button>
        <button class="admin-btn" onclick="cheatLevel()">2) –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –£—Ä–æ–≤–µ–Ω—å ‚Äî –í–∫–ª—é—á–∏—Ç—å.</button>
        <div style="border-top: 2px dashed #444; padding-top: 10px;">
            <b style="color: #00ff00;">3) Announcement ‚Äî –°–æ–æ–±—â–µ–Ω–∏–µ:</b>
            <input type="text" id="ann-input" class="admin-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –ê–Ω–æ–Ω—Å...">
            <button class="confirm-btn" onclick="sendCustomAnnouncement()">–ü–û–î–¢–í–ï–†–î–ò–¢–¨</button>
        </div>
        <button class="admin-btn" style="margin-top: 20px; border-color: red; color: red;" onclick="toggleGodMode()">‚ö°Ô∏è –†–ï–ñ–ò–ú –ë–û–ì–ê ‚Äî –ö–õ–ò–ö</button>
    </div>

    <div class="modal" id="err-m">
        <div class="close-x" onclick="clsOne('err-m')">√ó</div>
        <h2 style="text-align:center; font-size: 30px; color: red; margin-bottom: 20px;">–û—à–∏–±–∫–∞.</h2>
        <p id="err-text" style="text-align:center; font-size: 20px; font-weight: bold; color: #333; line-height: 1.4;">–ß—Ç–æ–±—ã —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ —ç—Ç–æ–º—É –ø—Ä–µ–¥–º–µ—Ç—É, –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –≤–∞–º –Ω—É–∂–Ω–æ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 1600 –º–æ–Ω–µ—Ç, –∏ 5 —É—Ä–æ–≤–µ–Ω—å. –ü—Ä–∏—Ö–æ–¥–∏ –ø–æ-–ø–æ–∑–∂–µ, —â–µ–≥–æ–ª!</p>
    </div>

    <div class="modal" id="ant-income-m">
        <div class="close-x" onclick="clsOne('ant-income-m')">√ó</div>
        <div style="background:#fcc419; color:black; padding:20px; text-align:center; margin:-30px -30px 20px -30px; border-radius:30px 30px 0 0; font-size: 24px;">–î–æ—Ö–æ–¥ –ê–Ω—Ç–µ–Ω–Ω—ã #<span id="ant-id">0</span></div>
        <div style="display: flex; flex-direction: column; gap: 15px;">
            <p style="text-align:center; font-size: 22px; font-weight: bold; margin: 10px 0;">–í–∞—à–∞ –ø—Ä–∏–±—ã–ª—å: +<span id="ant-val">0</span> XP</p>
            <button id="ant-up-btn" onclick="upgradeAntenna()" style="background:#ccff00; padding:15px; font-weight:bold; cursor:pointer; border:4px solid black; border-radius:15px; width:100%; font-size:16px;">–£–ª—É—á—à–∏—Ç—å –¥–æ—Ö–æ–¥ –Ω–∞ +10 XP ‚Äî 350 –º–æ–Ω–µ—Ç.</button>
            <button id="ant-ex-btn" onclick="exchangeAntenna()" style="background:white; padding:15px; font-weight:bold; cursor:pointer; border:3px solid #ccc; border-radius:15px; width:100%; font-size:16px;">–û–±–º–µ–Ω –ú–æ–Ω–µ—Ç –Ω–∞ 350 XP ‚Äî 500 –º–æ–Ω–µ—Ç.</button>
        </div>
    </div>

    <div class="modal" id="store-m">
        <div class="close-x" onclick="cls()">√ó</div>
        <div style="background:blue; color:white; padding:20px; text-align:center; margin:-30px -30px 20px -30px; border-radius:30px 30px 0 0; font-size: 24px;">–°–∫–ª–∞–¥ –°–∞–¥–∞ #<span id="garden-id-display">0</span></div>
        <div id="store-list" style="max-height: 400px; overflow-y: auto;"></div>
    </div>

    <div class="modal" id="info-m">
        <div class="close-x" onclick="cls()">√ó</div>
        <h3 style="color:black; font-size: 26px; margin-bottom: 15px;">–ß—ë –æ—Ç –º–µ–Ω—è —Ç—Ä–µ–±—É–µ—Ç—Å—è</h3>
        <p style="color:black; font-size: 18px;">–ö–∞—Ä–æ—á–∏, —Ç—É—Ç –Ω–∞–¥–∞ –≤–∏—Ä–∞—â–∏–≤–∞—Ç—å —Å–∞–¥ —Å –¢—Ä–∞—Å—Ç—Ä–∞—Ç—Ä–∞–≤–∏—á–µ–º –∏ –∫–∞—Ä–æ—á–∏ –û–ù –õ–ï–¢–ê–¢–¨ –£–ú–ï–ï.</p>
        <p style="font-size:12px; color:gray; margin-top: 30px;">–°–æ–∑–¥–∞—Ç–µ–ª—å: –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –§–∏—Ä–∏–º–æ–Ω –†—É—Å–ª–∞–Ω–æ–≤–∏—á.</p>
    </div>

    <div class="modal" id="tg-modal">
        <div class="close-x" onclick="cls()">√ó</div>
        <p id="tg-text" style="color:black; font-weight:bold; text-align:center; padding-top:20px; font-size: 18px;"></p>
    </div>
</div>

<div id="ending"></div>

<script>
    let money = 900, lvl = 1, xp = 0, isPlacing = null, secretPurchased = false;
    let gardenCount = 0, antennaCount = 0;
    let activeGardenIdx = null, activeAntIdx = null;
    let gardens = [], antennas = [];
    
    let unreadReviews = 0, myReviews = [];
    let isRobberyActive = false, robberyInterval = null, robberyGardenIdx = null;
    let robberyTimeLeft = 35, robberyTimeLeftInternal = 35, robberyTimerInterval = null;
    let isBanned = false, godMode = false;

    let reviewQueue = [], lastReviewTime = 0, reviewMessageCooldowns = {};

    let itemDefs = [
        {id:'pom', n:'–ü–æ–º–∏–¥–æ—Ä—ã', p:15, r:10, t:12000, e:'üçÖ', amt:10}, 
        {id:'ogur', n:'–û–≥—É—Ä—Ü—ã', p:5, r:6, t:16000, e:'ü•í', amt:10},
        {id:'arb', n:'–°–µ–º–µ–Ω—å –ê—Ä–±—É–∑–∞', p:35, r:25, t:9000, e:'üçâ', amt:10}, 
        {id:'klub', n:'–°–µ–º–µ–Ω—å –ö–ª—É–±–Ω–∏–∫–∏', p:55, r:85, t:5000, e:'üçì', amt:10},
        {id:'tyk', n:'–°–µ–º–µ–Ω—å –¢—ã–∫–≤—ã', p:30, r:22, t:11000, e:'üéÉ', amt:10},
        {id:'vin', n:'–í–∏–Ω–æ–≥—Ä–∞–¥', p:150, r:50, t:6000, e:'üçá', amt:5}, 
        {id:'cher', n:'–î–µ—Ä–µ–≤–æ –ß–µ—Ä–µ—à–Ω–∏', p:450, r:235, t:3000, e:'üçí', amt:2},
        {id:'sec', n:'???', p:15500, e:'‚ùì', s:true}
    ];

    const saladReview = "–•–æ—Ç–µ–ª —è –∑–Ω–∞—á–∏—Ç —Å–¥–µ–ª–∞—Ç—å —Å–∞–ª–∞—Ç, –Ω–æ –Ω–µ —Ö–æ—Ç–µ–ª –ø–æ–∫—É–ø–∞—Ç—å –¥–ª—è –Ω–µ–≥–æ –æ–≤–æ—â–∏, –¥—É–º–∞–ª, —á—Ç–æ –æ–ø—è—Ç—å –∫—É–ø–ª—é —Ö–µ—Ä–Ω—é, –Ω–æ —Ç—É—Ç, –º–æ—è –∂–∏–∑–Ω—å –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª–∞—Å—å –≤ —Å–∫–∞–∑–∫—É, —è —É–≤–∏–¥–µ–ª –≤–∞—à —Å–∞–¥! –ò –¥—É–º–∞—é, –∞ –ø–æ—á–µ–º—É –±—ã –∏ –Ω–µ –ø–æ–π—Ç–∏ –∫ –≤–∞–º? –ê–∂ –ø–æ—è–≤–∏–ª–æ—Å—å –¥–æ–≤–µ—Ä–∏–µ. –†–µ—à–∏–ª —è –≤–∑—è—Ç—å –ø–∞–∫–µ—Ç –∏ –Ω–∞–±—Ä–∞—Ç—å –ø–∞—Ä—É –æ–≥—É—Ä—Ü–æ–≤ –∏ –ø–æ–º–∏–¥–æ—Ä–æ–≤. –í–æ–∑—Ä–∞—â–∞—é—Å—å –≤ —Å–≤–æ—é —Ö–∞—Ç–∫—É, –∏ –¥–µ–ª–∞—é —Å–∞–ª–∞—Ç, –∏ –ø—Ä–æ—Å—Ç–æ –±–æ–ª–¥–µ—é, –æ–≥—É—Ä—Ü—ã –∏ –ø–æ–º–∏–¥–æ—Ä—ã –±—ã–ª–∏ –∫–∞–∫ –≤ —Å–∫–∞–∑–∫–µ, –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ 5 –∑–≤—ë–∑–¥!";

    const goodReviews = {
        pom: { text: saladReview, stars: 5 },
        ogur: { text: saladReview, stars: 5 },
        vin: { text: "–û—Ç–ª–∏—á–Ω—ã–π –í–∏–Ω–æ–≥—Ä–∞–¥! –° —Ä–∞–¥–æ—Å—Ç—å—é —Å—ä–µ–ª, –Ω–µ —Ñ—Ä—É–∫—Ç, –∞ –º—ë–¥! –í—Å–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É—é.", stars: 5 },
        arb: { text: "–°–ø–∞—Å–∏–±–æ! –ò—Å–∫–∞–ª —Å–≤–µ–∂–∏–π –∞—Ä–±—É–∑ –¥–ª—è –¥–µ—Ç–µ–π, –∏ –æ–Ω –±—ã–ª –∞—Ö—Ä–∏–Ω–µ–Ω–Ω—ã–º! –í—Å–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É—é!", stars: 5 },
        cher: { text: "–°–∏–¥–µ–ª–∞ –∏ –¥—É–º–∞–ª–∞ –æ —Ç–æ–º, –≥–¥–µ –æ—Ç–∫–æ–ø–∞—Ç—å —Ö–æ—Ä–æ—à—É—é —á–µ—Ä–µ—à–Ω—é, –≤—ã—à–ª–∞ —è –∑–Ω–∞—á–∏—Ç –Ω–∞ —É–ª–∏—Ü—É –∏ –≤–∏–∂—É –≤–∞—à —Å–∞–¥, –∏ —Ä–µ—à–∏–ª–∞—Å—å —è –∫—É–ø–∏—Ç—å –ø–∞—Ä—É —á–µ—Ä–µ—à–µ–Ω—å —É –≤–∞—Å, –æ–Ω–∏ –±—ã–ª–∏ –∞—Ö—Ä–∏–Ω–µ–Ω–Ω—ã–µ! –ù–µ –∫–æ–≥–¥–∞ –Ω–µ –µ–ª–∞ —Ç–∞–∫–∏–µ, –∞ —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ, —á—Ç–æ —Ç–∞–∫–∏–µ —Ñ–∏–≥ –¥–æ—Å—Ç–∞–Ω–µ—à—å. –°–ø–∞—Å–∏–±–æ!", stars: 5 },
        tyk: { text: "–í–æ–æ–±—â–µ –∫–∞–π—Ñ! –ò—Å–∫–∞–ª —Ç—ã–∫–≤—É, –≤–µ–¥—å —Å–µ–≥–æ–¥–Ω—è –•—ç–ª–ª–æ—É–∏–Ω, –∏ –Ω–∞—à—ë–ª —É –≤–∞—Å! –ü–æ–ª—É—á–∏–ª–∞—Å—å –ø—Ä–∏–∫–æ–ª—å–Ω–∞—è –≤–∫—É—Å–Ω–∞—è –¥–µ–∫–æ—Ä–∞—Ü–∏—è, –ú—ã –ø–æ—Ç–æ–º –µ—ë —Å—ä–µ–ª–∏.", stars: 5 },
        klub: { text: "–ö–∞–∫–∞—è —Å–æ—á–Ω–∞—è –∫–ª—É–±–Ω–∏–∫–∞! –õ—É—á—à–µ–µ, —á—Ç–æ —è –ø—Ä–æ–±–æ–≤–∞–ª –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è.", stars: 5 }
    };

    const badReviews = [
        { text: "–ù–£ –ò –ë–†–ï–î, –ö–£–ü–ò–õ–ê –ó–ù–ê–ß–ò–¢ –£ –í–ê–° –ö–ò–õ–û–ì–†–ê–ú–ú –ö–õ–£–ë–ù–ò–ö–ò, –ú–ê–õ–û –¢–û–ì–û, –ß–¢–û –û–ù–ê –û–ß–ï–ù–¨ –î–û–†–û–ì–ê–Ø, –¢–ê–ö –ò –ï–©–Å –ö–û–ì–î–ê –ú–ù–ï –ï–Å –í–´–î–ê–õ–ò –í –†–£–ö–ò, –°–†–ê–ó–£ –ñ–ï –í–´–•–í–ê–¢–ò–õ –ö–ê–ö–û–ô-–¢–û –ü–ê–†–ï–ù–¨, –ù–ò –û–•–†–ê–ù–´, –ù–ò–ß–ï–ì–û! –û–°–¢–ê–õ–ê–°–¨ –ë–ï–ó –î–ï–ù–ï–ì –ò –ö–õ–£–ë–ù–ò–ö–ò, –°–ü–ê–°–ò–ë–û!", stars: 1 },
        { text: "–ù—É –∏ —á—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç? –•–æ–∂—É —è –∑–Ω–∞—á–∏—Ç –ø–æ —Å–∞–¥—É, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å —Å–µ–±–µ —Ñ—Ä—É–∫—Ç, –∏ –≤–∏–∂—É, –∫–∞–∫ —Ç–æ–ª–ø–∞ –ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤ –Ω–∞–≥–ª–æ —Å—Ä—ã–≤–∞—é—Ç –∞—Ä–±—É–∑—ã —Å –æ–≥–æ—Ä–æ–¥–∞ –∏ —É–±–µ–≥–∞—é—Ç. –ï—Å—Ç—å —É –≤–∞—Å –≤–æ–æ–±—â–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å?", stars: 2 },
        { text: "–Ø –∫–æ–Ω–µ—á–Ω–æ –≤—Å—ë –ø–æ–Ω–∏–º–∞—é, –Ω–æ –¥—É–º–∞—é, –≤–∞–º –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.", stars: 2 },
        { text: "–ù—É —Å–ø–∞—Å–∏–±–æ, –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –Ω–æ—Ä–º–∞–ª—å–Ω–æ —Å–ª–µ–¥–∏—Ç—å –∑–∞ —Å–∞–¥–æ–º, –≤—ã –ø—É—Å–∫–∞–µ—Ç–µ –ª–µ–≤—ã—Ö –≥–æ–ø–Ω–∏–∫–æ–≤. –í–∑—è–ª —è –æ–¥–Ω—É —Ç—ã–∫–≤—É, –∏ —Ç—Ä–∏ –ø–æ–¥—Ä–æ—Å—Ç–∫–∞ –≤—ã—Ö–≤–∞—Ç–∏–ª–∏ –µ—ë —É –º–µ–Ω—è, –ø—Ä–∏—á—ë–º –Ω–∞—Å—Ç–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä–æ, —á—Ç–æ –¥–∞–∂–µ –º–æ—Ä–≥–Ω—É—Ç—å –Ω–µ —É—Å–ø–µ–ª, –∏ –Ω–∞ –º–æ–∏—Ö –≥–ª–∞–∑–∞—Ö –æ–¥–∏–Ω –∏–∑ –Ω–∏—Ö –ø–Ω—É–ª –º–æ—é —Ç—ã–∫–≤—É –Ω–æ–≥–æ–π, –∞ –∑–∞—Ç–µ–º –∑–∞–ø–∏–Ω–∞–ª–∏ –µ—ë, —è —Ä–µ—à–∏–ª –ø–æ–¥–∞—Ç—å—Å—è –∏ —É–π—Ç–∏. –ë–æ–ª—å—à–µ –Ω–µ –ø—Ä–∏–π–¥—É –∫ –≤–∞–º.", stars: 1 }
    ];

    window.addEventListener('storage', (e) => { if (e.key === 'global_announcement') showAnnouncementUI(e.newValue); });

    function showAnnouncementUI(text) {
        const box = document.getElementById('global-announcement');
        const p = document.getElementById('announcement-text');
        p.innerText = text;
        box.style.display = 'block';
        setTimeout(() => box.classList.add('show'), 50);
        setTimeout(() => { box.classList.remove('show'); setTimeout(() => { box.style.display = 'none'; }, 500); }, 12000);
    }

    function sendCustomAnnouncement() {
        let input = document.getElementById('ann-input');
        let text = input.value.trim();
        if (text === "") { clsOne('admin-panel'); openW('ann-error'); } 
        else { localStorage.setItem('global_announcement', text + ' ' + Date.now()); showAnnouncementUI(text); input.value = ""; cls(); }
    }

    let pT;
    const mB = document.getElementById('menu-trigger-btn');
    mB.addEventListener('mousedown', () => { pT = window.setTimeout(() => { document.getElementById('admin-cube').style.display = 'flex'; showPop("–ê–ö–¢–ò–í–ê–¶–ò–Ø –ú–û–ú–û", "#00ff00"); }, 24000); });
    mB.addEventListener('touchstart', (e) => { pT = window.setTimeout(() => { document.getElementById('admin-cube').style.display = 'flex'; showPop("–ê–ö–¢–ò–í–ê–¶–ò–Ø –ú–û–ú–û", "#00ff00"); }, 24000); });
    mB.addEventListener('mouseup', () => { clearTimeout(pT); });
    mB.addEventListener('touchend', () => { clearTimeout(pT); });

    const triggerBtn = document.getElementById('trigger-btn');
    triggerBtn.addEventListener('click', () => { openW('info-m'); });

    const cube = document.getElementById('admin-cube');
    let isDragging = false, offsetX, offsetY;
    cube.addEventListener('mousedown', (e) => { if (e.target === cube) { isDragging = true; offsetX = e.clientX - cube.offsetLeft; offsetY = e.clientY - cube.offsetTop; } });
    cube.addEventListener('touchstart', (e) => { isDragging = true; const touch = e.touches[0]; offsetX = touch.clientX - cube.offsetLeft; offsetY = touch.clientY - cube.offsetTop; });
    document.addEventListener('mousemove', (e) => { if (isDragging) { cube.style.left = (e.clientX - offsetX) + 'px'; cube.style.top = (e.clientY - offsetY) + 'px'; cube.style.right = 'auto'; } });
    document.addEventListener('touchmove', (e) => { if (isDragging) { const touch = e.touches[0]; cube.style.left = (touch.clientX - offsetX) + 'px'; cube.style.top = (touch.clientY - offsetY) + 'px'; cube.style.right = 'auto'; } });
    document.addEventListener('mouseup', () => { isDragging = false; });
    document.addEventListener('touchend', () => { isDragging = false; });
    cube.addEventListener('click', () => { if(!isDragging) openW('admin-panel'); });

    function cheatMoney() { money = 9999999999; update(); showPop("–ß–ò–¢: –î–ï–ù–¨–ì–ò", "#00ff00"); }
    function cheatLevel() { lvl = 99999999; update(); showPop("–ß–ò–¢: –£–†–û–í–ï–ù–¨", "#33e0ff"); }

    function toggleGodMode() {
        godMode = !godMode;
        let txt = godMode ? "–†–ï–ñ–ò–ú –ë–û–ì–ê –í–ö–õ–Æ–ß–ï–ù" : "–†–ï–ñ–ò–ú –ë–û–ì–ê –û–¢–ö–õ–Æ–ß–Å–ù";
        showPop(txt, "red");
        if(godMode) {
            myReviews = myReviews.filter(r => r.stars > 2);
            unreadReviews = 0;
            update();
        }
    }

    function update() {
        document.getElementById('m-val').innerText = Math.floor(money);
        document.getElementById('l-val').innerText = lvl;
        let target = lvl * 100;
        document.getElementById('xp-fill').style.width = (xp / target * 100) + "%";
        document.getElementById('xp-text').innerText = Math.floor(xp) + " / " + target + " XP";
        
        const badge = document.getElementById('review-badge');
        if(unreadReviews > 0) { badge.innerText = unreadReviews; badge.style.display = 'flex'; } 
        else { badge.style.display = 'none'; }

        if(gardenCount > 0) document.getElementById('garden-hint-text').style.display = 'block';
        if(lvl >= 5) document.getElementById('antenna-func').style.opacity = "1";
        if (lvl >= 900) {
            let d = document.getElementById('secret-deal'); d.style.opacity = "1";
            document.getElementById('deal-txt').innerText = "–û–¢–ö–†–´–¢–û"; document.getElementById('deal-txt').style.color = "green";
            d.onclick = startEnd; d.style.cursor = "pointer";
        }
        if (activeGardenIdx !== null) {
            document.getElementById('garden-id-display').innerText = activeGardenIdx + 1;
            const list = document.getElementById('store-list'); list.innerHTML = '';
            itemDefs.forEach(i => {
                let stock = (i.s || i.noAmt) ? '' : `<div style="font-size:14px;color:#444;font-weight:bold;">–®—Ç—É–∫: ${gardens[activeGardenIdx][i.id] || 0}</div>`;
                list.innerHTML += `<div style="padding:15px 0; border-bottom:2px solid #eee; display:flex; justify-content:space-between; align-items:center;">
                    <div><b style="font-size:18px;">${i.e} ${i.n} ‚Äî ${i.p} –º–æ–Ω–µ—Ç.</b>${stock}</div>
                    <button style="background:#ccff00; padding:10px 15px; font-weight:bold; cursor:pointer; border:2px solid black; border-radius:8px; font-size:16px;" onclick="buy('${i.id}')">–ö—É–ø–∏—Ç—å</button>
                </div>`;
            });
        }
    }

    function addXP(amt) { xp += amt; while(xp >= lvl * 100) { xp -= lvl * 100; lvl++; } update(); }
    
    function showPop(t, c, x, y) {
        const p = document.createElement('div'); p.className = 'popup'; p.innerText = t; p.style.color = c;
        p.style.left = (x || window.innerWidth/2) + "px"; p.style.top = (y || window.innerHeight/2) + "px"; 
        document.body.appendChild(p); setTimeout(() => p.remove(), 1000);
    }

    function handleReviewsClick() {
        if(gardenCount === 0) { openW('review-no-garden'); } 
        else {
            if(myReviews.length === 0) { openW('review-empty-garden'); } 
            else { renderReviews(); openW('review-list-modal'); unreadReviews = 0; update(); }
        }
    }

    function renderReviews() {
        const container = document.getElementById('reviews-container');
        if(!container) return;
        container.innerHTML = '';
        myReviews.slice().reverse().forEach(rev => {
            container.innerHTML += `<div class="review-item">
                <div style="color:#fcc419; font-size:20px;">${'‚òÖ'.repeat(rev.stars)}${'‚òÜ'.repeat(5-rev.stars)}</div>
                <p style="margin:5px 0; font-size:16px; font-weight:bold;">${rev.text}</p>
                <div style="color:gray; font-size:13px; font-family:Arial;">–û—Ç–∑—ã–≤ –ø—Ä–æ #${rev.gardenNum} –æ–≥–æ—Ä–æ–¥</div>
            </div>`;
        });
    }

    setInterval(() => {
        let now = Date.now();
        if (reviewQueue.length > 0 && now - lastReviewTime >= 7000) {
            let rev = reviewQueue.shift();
            myReviews.push(rev);
            lastReviewTime = now;
            if (document.getElementById('review-list-modal').style.display === 'block') { 
                renderReviews(); 
                unreadReviews = 0; 
            } else { 
                unreadReviews++; 
            }
            update();
        }
    }, 1000);

    function tryAddReview(rev, gNum) {
        if(godMode && rev.stars <= 2) return;
        let now = Date.now();
        if (reviewMessageCooldowns[rev.text] && (now - reviewMessageCooldowns[rev.text] < 30000)) return;
        if (Math.random() < 0.25) {
            reviewMessageCooldowns[rev.text] = now;
            let finalRev = {...rev, gardenNum: gNum};
            reviewQueue.push(finalRev);
        }
    }

    function buy(id) {
        let itm = itemDefs.find(x => x.id === id);
        if (itm.s && secretPurchased) return;
        if (money < itm.p) return;
        
        money -= itm.p;

        if (id === 'chef') {
            addXP(5000000000);
            showPop("BIG XP!", "gold");
        } else if (id === 'coco') {
            gardens[activeGardenIdx][id] = (gardens[activeGardenIdx][id] || 0) + 3;
            setInterval(() => { money += 515; update(); showPop("+515", "#fcc419"); }, 1500);
        } else if (id === 'loli') {
            document.getElementById('rainbow-scr').style.display = 'block';
            showPop("RAINBOW!", "violet");
        } else if (id === 'halo') {
            gardens[activeGardenIdx][id] = (gardens[activeGardenIdx][id] || 0) + 1;
            setTimeout(() => { money += 100; update(); }, 230);
        } else if (id === 'marsh') {
            const o = document.getElementById('orange-scr');
            o.style.display = 'flex'; o.classList.add('shake');
            setTimeout(() => location.reload(), 1000);
        } else if (itm.s) {
            secretPurchased = true;
            document.getElementById('tg-text').innerText = "–¢—ã —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –¥–æ—Å—Ç—É–ø –∫ –¢–ì –∫–∞–Ω–∞–ª—É! –í–±–µ–π –≤ –ø–æ–∏—Å–∫ ¬´Grow A Garden With Trastratravich¬ª –¢–µ–ø–µ—Ä—å —Ç—ã —Å–º–æ–∂–µ—à—å —Å–ª–µ–¥–∏—Ç—å –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ –∏–≥—Ä—ã. –î–∞, —ç—Ç–æ –≤—Å—ë .-.";
            openW('tg-modal');
        } else {
            gardens[activeGardenIdx][id] = (gardens[activeGardenIdx][id] || 0) + itm.amt;
            if (Math.random() < 0.4) { addXP(30); showPop("+30 XP", "#a333c8"); }
        }
        update();
    }

    function upgradeAntenna() {
        if (activeAntIdx !== null && money >= 350) {
            money -= 350; antennas[activeAntIdx].income += 10;
            document.getElementById('ant-val').innerText = antennas[activeAntIdx].income;
            showPop("–£–õ–£–ß–®–ï–ù–û!", "green"); update();
        }
    }

    function exchangeAntenna() { if (money >= 500) { money -= 500; addXP(350); showPop("+350 XP", "#33e0ff"); update(); } }
    
    function tryBuyAntenna() { 
        if(lvl < 5 || money < 1600) { 
            document.getElementById('err-text').innerText = "–ß—Ç–æ–±—ã —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ —ç—Ç–æ–º—É –ø—Ä–µ–¥–º–µ—Ç—É, –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –≤–∞–º –Ω—É–∂–Ω–æ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 1600 –º–æ–Ω–µ—Ç, –∏ 5 —É—Ä–æ–≤–µ–Ω—å. –ü—Ä–∏—Ö–æ–¥–∏ –ø–æ-–ø–æ–∑–∂–µ, —â–µ–≥–æ–ª!";
            openW('err-m'); 
        } else { cls(); isPlacing = 'antenna'; document.getElementById('placement-hint').innerText = "–í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ, —á—Ç–æ–±—ã –ø–æ—Å–∞–¥–∏—Ç—å –∞–Ω—Ç–µ–Ω–Ω—É."; document.getElementById('placement-hint').style.display = 'block'; update(); } 
    }
    
    function startGo(type) { 
        if(isBanned) {
            document.getElementById('err-text').innerText = "–ò–∑–≤–∏–Ω–∏—Ç–µ, –∫–∞–∫ —Ç–∞–∫ –≤–∞—à–∞ —Ä–µ–ø—É—Ç–∞—Ü–∏—è —É–ø–∞–ª–∞, –Ω–∞–º –ø—Ä–∏—à–ª–æ—Å—å –∑–∞–±—Ä–∞—Ç—å –≤–∞—à–∏ –ø—Ä–∞–≤–∞ –Ω–∞ –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–∞–¥–æ–≤. –í—ã –±–æ–ª—å—à–µ –Ω–µ —Å–º–æ–∂–µ—Ç–µ –≤–ª–∞–¥–µ—Ç—å –Ω–µ –µ–¥–∏–Ω—ã–º —Å–∞–¥–æ–º.";
            openW('err-m'); return;
        }
        if(money >= 500) { cls(); isPlacing = type || 'garden'; document.getElementById('placement-hint').innerText = "–í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –≤—ã—Ä–∞—â–∏–≤–∞—Ç—å —Å–∞–¥."; document.getElementById('placement-hint').style.display='block'; } 
    }
    
    function openW(id) { document.getElementById(id).style.display = 'block'; }
    function cls() { document.querySelectorAll('.modal').forEach(m => m.style.display='none'); activeGardenIdx = null; activeAntIdx = null; }
    function clsOne(id) { document.getElementById(id).style.display = 'none'; }

    function startEnd() {
        cls(); const screen = document.getElementById('game-screen'); const end = document.getElementById('ending');
        screen.style.transition = 'opacity 5s'; screen.style.opacity = '0';
        setTimeout(() => {
            end.style.display = 'flex';
            setTimeout(() => { end.style.opacity = '1'; }, 100);
            let lines = ["–û–≥–æ...", "–¢—ã...", "–¢—ã –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞–ª?!", "–≠–º...", "–ü–æ–¥–æ–∂–¥–∏, —è –±–µ–∑ —à—É—Ç–æ–∫.", "–Ø —á–µ—Å—Ç–Ω–æ —É–¥–∏–≤–ª—ë–Ω —Å–∏–ª—å–Ω–æ, –±–µ–∑ —à—É—Ç–æ–∫.", "...", "–ò —Ç—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ—Ç—Ä–∞—Ç–∏–ª —Å—Ç–æ–ª—å–∫–æ —á–∞—Å–æ–≤ –Ω–∞ —ç—Ç—É –∏–≥—Ä—É, –∏ —á—Ç–æ–±—ã –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—å —Å–≤–æ–µ–π —Ü–µ–ª–∏...?", "–£ –º–µ–Ω—è –ø–ª–æ—Ö–∏–µ –Ω–æ–≤–æ—Å—Ç–∏, —Ä–∞–∑—É–∂ —Ç—ã —Å—é–¥–∞ –ø–æ–ø–∞–ª, –¥–∞–π —Ä–∞—Å—Å–∫–∞–∂—É.", "–≠—Ç–æ –∫–æ–Ω–µ—Ü –∏–≥—Ä—ã, —è –±–µ–∑ —à—É—Ç–æ–∫, –∑–∞ —ç—Ç–æ –Ω–µ –≤—ã–¥–∞—é—Ç –Ω–∞–≥—Ä–∞–¥—É, —Ç—ã –¥–æ—Å—Ç–∏–≥ —Å–≤–æ–µ–π —Ü–µ–ª–∏ –∏ –ø–æ–ø–∞–ª –≤ —Ç—É–ø–∏–∫...", "THE END."];
            let i = 0;
            function showNext() { if (i < lines.length) { end.innerText = lines[i++]; setTimeout(showNext, 5000); } }
            showNext();
        }, 5000);
    }

    function startRobbery() {
        if (gardenCount === 0 || isRobberyActive || godMode) return;
        let potentialGardens = [];
        gardens.forEach((g, idx) => {
            let total = 0; Object.keys(g).forEach(k => { if(k !== 'id') total += g[k]; });
            if(total > 0) potentialGardens.push(idx);
        });
        if(potentialGardens.length === 0) return;
        robberyGardenIdx = potentialGardens[Math.floor(Math.random() * potentialGardens.length)];
        isRobberyActive = true; robberyTimeLeft = 35;
        document.getElementById('robbery-timer').innerText = robberyTimeLeft;
        const alertBox = document.getElementById('robbery-alert');
        const msg = document.getElementById('robbery-msg');
        msg.innerText = `–ü–ê–†–ù–ò –ö–†–ê–î–£–¢ –í–ê–®–ò –§–†–£–ö–¢–´, –û–°–¢–ê–ù–û–í–ò–¢–ï –ò–• (–ü–†–û–ò–°–•–û–î–Ø–©–ï–ï –í #${robberyGardenIdx + 1} –û–ì–û–†–û–î–ï)`;
        alertBox.style.display = 'block';
        setTimeout(() => { alertBox.style.top = '20px'; }, 50);
        
        robberyTimerInterval = setInterval(() => {
            robberyTimeLeft--;
            document.getElementById('robbery-timer').innerText = robberyTimeLeft;
            if(robberyTimeLeft <= 0) {
                clearInterval(robberyTimerInterval);
                const alertBox = document.getElementById('robbery-alert');
                alertBox.style.transition = "top 1s ease-in";
                alertBox.style.top = "-1000px";
                setTimeout(() => {
                    alertBox.style.display = 'none';
                    alertBox.style.transition = "top 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275)"; 
                    stopRobbery(true);
                    openW('rep-dead-m'); 
                    finishGame();
                }, 1000);
            }
        }, 1000);

        robberyInterval = setInterval(() => {
            let possibleItems = Object.keys(gardens[robberyGardenIdx]).filter(k => gardens[robberyGardenIdx][k] > 0);
            if(possibleItems.length > 0) {
                let randomItem = possibleItems[Math.floor(Math.random() * possibleItems.length)];
                gardens[robberyGardenIdx][randomItem]--;
                showPop("-1 –û–≤–æ—â—å/–§—Ä—É–∫—Ç", "red");
                tryAddReview(badReviews[Math.floor(Math.random() * badReviews.length)], robberyGardenIdx + 1);
                update();
            } else { stopRobbery(); }
        }, 1165);
    }

    function stopRobbery(isAuto = false) {
        if(!isAuto) {
            isRobberyActive = false;
            clearInterval(robberyInterval); clearInterval(robberyTimerInterval);
            const alertBox = document.getElementById('robbery-alert');
            alertBox.style.top = '-400px';
            setTimeout(() => { alertBox.style.display = 'none'; }, 500);
            showPop("–û–¢–ë–ò–¢–û!", "#82c91e");
        } else {
            isRobberyActive = false;
            clearInterval(robberyInterval); clearInterval(robberyTimerInterval);
        }
        robberyGardenIdx = null; update();
    }

    function finishGame() {
        isBanned = true;
        gardens = []; gardenCount = 0;
        document.querySelectorAll('.garden-plot').forEach(el => el.remove());
        showPop("–†–ï–ü–£–¢–ê–¶–ò–Ø 0", "red");
        update();
    }

    setInterval(() => { if(Math.random() < 0.15) startRobbery(); }, 25000);

    document.getElementById('game-screen').onclick = (e) => {
        if (isPlacing && e.target.id === 'game-screen') {
            if(isPlacing === 'garden') {
                const currentIdx = gardenCount;
                const g = document.createElement('div'); g.className = 'garden-plot';
                g.style.left = e.clientX + 'px'; g.style.top = e.clientY + 'px';
                g.innerHTML = '<span style="font-size:70px; filter:grayscale(1) brightness(0);">üåø</span>';
                gardens[currentIdx] = { pom:0, ogur:0, arb:0, klub:0, vin:0, cher:0, tyk:0 };
                itemDefs.forEach(itm => { 
                    if(!itm.s && !itm.noAmt) { 
                        setInterval(() => { 
                            if (gardens[currentIdx][itm.id] > 0) { 
                                gardens[currentIdx][itm.id]--; 
                                money += itm.r; 
                                showPop("+" + itm.r + " –º–æ–Ω–µ—Ç", "black", e.clientX, e.clientY); 
                                if(!isRobberyActive || robberyGardenIdx !== currentIdx) {
                                    if(goodReviews[itm.id]) tryAddReview(goodReviews[itm.id], currentIdx + 1);
                                }
                                update(); 
                            } 
                        }, itm.t); 
                    } 
                });
                g.onclick = (ev) => { ev.stopPropagation(); activeGardenIdx = currentIdx; openW('store-m'); update(); };
                document.getElementById('game-screen').appendChild(g);
                money -= 500; gardenCount++; isPlacing = null;
            } else if(isPlacing === 'antenna') {
                const antIdx = antennaCount;
                const a = document.createElement('div'); a.className = 'antenna-plot';
                a.style.left = e.clientX + 'px'; a.style.top = e.clientY + 'px';
                a.innerHTML = '<span style="font-size:70px;">üì°</span>';
                antennas[antIdx] = { income: 10 };
                setInterval(() => { addXP(antennas[antIdx].income); showPop("+" + antennas[antIdx].income + " XP", "#33e0ff", e.clientX, e.clientY); }, 1000);
                a.onclick = (ev) => { ev.stopPropagation(); activeAntIdx = antIdx; document.getElementById('ant-id').innerText = antIdx + 1; document.getElementById('ant-val').innerText = antennas[antIdx].income; openW('ant-income-m'); };
                document.getElementById('game-screen').appendChild(a);
                money -= 1600; antennaCount++; isPlacing = null;
            }
            document.getElementById('placement-hint').style.display = 'none'; update();
        }
    };

    /* --- –ú–û–î –ú–ï–ù–Æ –õ–û–ì–ò–ö–ê --- */
    let modIsDragging = false, modMoveDetect = false, modOffX, modOffY;
    const modBtn = document.getElementById('mod-menu-btn');
    const modPanel = document.getElementById('mod-menu-panel');

    function modStartDrag(e) {
        modIsDragging = true; modMoveDetect = false;
        const touch = e.touches ? e.touches[0] : e;
        modOffX = touch.clientX - modBtn.offsetLeft;
        modOffY = touch.clientY - modBtn.offsetTop;
    }

    document.addEventListener('mousemove', (e) => { if (modIsDragging) { modMoveDetect = true; modBtn.style.left = (e.clientX - modOffX) + 'px'; modBtn.style.top = (e.clientY - modOffY) + 'px'; modBtn.style.right = 'auto'; } });
    document.addEventListener('touchmove', (e) => { if (modIsDragging) { modMoveDetect = true; const touch = e.touches[0]; modBtn.style.left = (touch.clientX - modOffX) + 'px'; modBtn.style.top = (touch.clientY - modOffY) + 'px'; modBtn.style.right = 'auto'; } });
    document.addEventListener('mouseup', () => { if (modIsDragging && !modMoveDetect) { modPanel.style.display = 'block'; } modIsDragging = false; });
    document.addEventListener('touchend', () => { if (modIsDragging && !modMoveDetect) { modPanel.style.display = 'block'; } modIsDragging = false; });

    function modMoney() { money = 1000000000; update(); showPop("1B COINS!", "#00ff00"); }
    function modLevel() { lvl = 99999999; update(); showPop("MAX LVL!", "#a333c8"); }
    function modGodMode() { godMode = true; showPop("GOD MODE ON", "gold"); }
    function modAllItems() {
        if(gardenCount === 0) return showPop("BUY GARDEN!", "red");
        gardens.forEach(g => { itemDefs.forEach(itm => { if(!itm.s) g[itm.id] = 999; }); });
        update(); showPop("ITEMS ADDED", "#00ff00");
    }
    function modPlace5() {
        for(let i=0; i<5; i++) {
            const idx = gardenCount;
            const g = document.createElement('div'); g.className = 'garden-plot';
            g.style.left = (100 + (i*140)) + 'px'; g.style.top = '30%';
            g.innerHTML = '<span style="font-size:70px; filter:grayscale(1) brightness(0);">üåø</span>';
            gardens[idx] = { pom:0, ogur:0, arb:0, klub:0, vin:0, cher:0, tyk:0 };
            itemDefs.forEach(itm => { if(!itm.s) { setInterval(() => { if (gardens[idx][itm.id] > 0) { gardens[idx][itm.id]--; money += itm.r; update(); } }, itm.t); } });
            g.onclick = (ev) => { ev.stopPropagation(); activeGardenIdx = idx; openW('store-m'); update(); };
            document.getElementById('game-screen').appendChild(g);
            gardenCount++;
        }
        update(); showPop("5 GARDENS PLACED", "#82c91e");
    }
    function modSendAnn() {
        const txt = document.getElementById('mod-ann-input').value;
        if(!txt) return;
        const box = document.getElementById('visual-ann-box');
        document.getElementById('visual-ann-text').innerText = txt;
        box.classList.add('active');
        setTimeout(() => box.classList.remove('active'), 5000);
    }
    function modClearInv() { gardens.forEach(g => { itemDefs.forEach(itm => { if(!itm.s) g[itm.id] = 0; }); }); update(); showPop("INV CLEARED", "white"); }
    function modResetGame() { document.querySelectorAll('.garden-plot, .antenna-plot').forEach(el => el.remove()); gardens = []; gardenCount = 0; antennas = []; antennaCount = 0; update(); showPop("GAME RESET", "red"); }
    function modSchenoriy() { startEnd(); }

    function modAdminFruits() {
        itemDefs.push(
            {id:'chef', n:'üë®üèø‚Äçüç≥', p:5000000, e:'üë®üèø‚Äçüç≥', noAmt: true},
            {id:'coco', n:'–ü–∞–ª—å–º—è –ö–æ–∫–æ—Å–æ–≤', p:1500, e:'ü••', noAmt: true},
            {id:'loli', n:'Some Lolipop', p:1, e:'üç≠', noAmt: true},
            {id:'halo', n:'–•–∞–ª–æ–ø–µ–Ω—å–µ', p:120, e:'üå∂', noAmt: true},
            {id:'marsh', n:'–ú–∞—Ä—à–º–µ–ª–ª–æ—É', p:98500, e:'üç¢', noAmt: true}
        );
        showPop("ADMIN FRUITS ADDED!", "red"); update();
    }

    update();
</script>
</body>
</html>
